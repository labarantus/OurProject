{% extends 'base.html' %}
{% block content %}

<div class="container mt-5 col-md-8">
    <h1>Мои фильмы</h1>

    <ul class="nav nav-tabs nav-fill " id="myTab" role="tablist">
  <li class="nav-item mx-0" role="presentation">
      {% if list_num == 1 %}
    <button class="nav-link active " style="padding: 3px;" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">В процессе</button>
      {% else %}
      <button class="nav-link " style="padding: 3px;" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button" role="tab" aria-controls="home" aria-selected="true">В процессе</button>
      {% endif %}
  </li>
  <li class="nav-item mx-0" role="presentation">
      {% if list_num == 2 %}
    <button class="nav-link active" style="padding: 3px;" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">На очереди</button>
      {% else %}
    <button class="nav-link" style="padding: 3px;" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">На очереди</button>
      {% endif %}
  </li>
  <li class="nav-item mx-0" role="presentation">
      {% if list_num == 3 %}
    <button class="nav-link active" style="padding: 3px;" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Завершено</button>
      {% else %}
    <button class="nav-link" style="padding: 3px;" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="false">Завершено</button>
      {% endif %}
  </li>
</ul>
<div class="tab-content" id="myTabContent">
    {% if list_num == 1 %}
  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
    {% else %}
  <div class="tab-pane fade" id="home" role="tabpanel" aria-labelledby="home-tab">
    {% endif %}
      <div class="accordion accordion-flush" id="ac1">
            {% for n, i in film_list %}
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading{{i-1}}">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{i-1}}" aria-expanded="false" aria-controls="collapse{{i-1}}">
                            <h4>{{n}}. {{films[i-1].film_name}} ({{films[i-1].year}})</h4>
                        </button>
                    </h2>
                    <div id="collapse{{i-1}}" class="accordion-collapse collapse" aria-labelledby="heading{{i-1}}" >
                        <div class="card bg-light m-0 border-0" >
                          <div class="row g-0 p-3">
                            <div class="col-md-2">
                              <img src="{{ url_for('getposter', id=i) }}" class="img-fluid rounded" alt="poster" height="280" width="185">
                            </div>
                            <div class="col-md-9">
                              <div class="card-body">
                                <h5 class="card-title">Описание</h5>
                                <p class="card-text">{{films[i-1].descript}}</p>
                                <a href="{{ url_for('film_del', id=i, origin_list=1) }}" class="btn btn-danger">Удалить</a>
                                <a href="{{ url_for('relocate_film', id=i, origin_list=1, dest_list=2 ) }}" class="btn btn-primary">На очереди</a>
                                <a href="{{ url_for('relocate_film', id=i, origin_list=1, dest_list=3) }}" class="btn btn-primary">Завершен</a>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
  </div>
      {% if list_num == 2 %}
  <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
      {% else %}
  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
      {% endif %}
      <div class="accordion accordion-flush" id="ac2">
            {% for n, i in wish_list %}
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading2{{i-1}}">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse2{{i-1}}" aria-expanded="false" aria-controls="collapse2{{i-1}}">
                            <h4>{{n}}. {{films[i-1].film_name}} ({{films[i-1].year}})</h4>
                        </button>
                    </h2>
                    <div id="collapse2{{i-1}}" class="accordion-collapse collapse" aria-labelledby="heading2{{i-1}}" >
                        <div class="card bg-light m-0 accordion-flush" >
                          <div class="row g-0 p-3">
                            <div class="col-md-2">
                              <img src="{{ url_for('getposter', id=i) }}" class="img-fluid rounded" alt="poster" height="280" width="185">
                            </div>
                            <div class="col-md-9">
                              <div class="card-body">
                                <h5 class="card-title">Описание</h5>
                                <p class="card-text">{{films[i-1].descript}}</p>
                                <a href="{{ url_for('film_del', id=i, origin_list=2) }}" class="btn btn-danger">Удалить</a>
                                <a href="{{ url_for('relocate_film', id=i, origin_list=2, dest_list=1 ) }}" class="btn btn-primary">В процессе</a>
                                <a href="{{ url_for('relocate_film', id=i, origin_list=2, dest_list=3) }}" class="btn btn-primary">Завершен</a>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
  </div>
      {% if list_num == 3 %}
  <div class="tab-pane fade show active" id="contact" role="tabpanel" aria-labelledby="contact-tab">
      {% else %}
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
      {% endif %}
      <div class="accordion accordion-flush" id="ac3">
            {% for n, i in archive %}
                <div class="accordion-item">
                    <h2 class="accordion-header" id="heading3{{i-1}}">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse3{{i-1}}" aria-expanded="false" aria-controls="collapse3{{i-1}}">
                            <h4>{{n}}. {{films[i-1].film_name}} ({{films[i-1].year}})</h4>
                        </button>
                    </h2>
                    <div id="collapse3{{i-1}}" class="accordion-collapse collapse" aria-labelledby="heading3{{i-1}}" >
                        <div class="card bg-light m-0 accordion-flush" >
                          <div class="row g-0 p-3">
                            <div class="col-md-2">
                              <img src="{{ url_for('getposter', id=i) }}" class="img-fluid rounded" alt="poster" height="280" width="185">
                            </div>
                            <div class="col-md-9">
                              <div class="card-body">
                                <h5 class="card-title">Описание</h5>
                                <p class="card-text">{{films[i-1].descript}}</p>
                                <a href="{{ url_for('film_del', id=i, origin_list=3) }}" class="btn btn-danger">Удалить</a>
                                <a href="{{ url_for('relocate_film', id=i, origin_list=3, dest_list=1) }}" class="btn btn-primary">В процессе</a>
                                <a href="{{ url_for('relocate_film', id=i, origin_list=3, dest_list=2) }}" class="btn btn-primary">На очереди</a>
                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
  </div>
</div>
</div>


{% endblock %}
